/*! UIkit 3.0.0-beta.35 | http://www.getuikit.com | (c) 2014 - 2017 YOOtheme | MIT License */

!function(t,i){"object"==typeof exports&&"undefined"!=typeof module?module.exports=i():"function"==typeof define&&define.amd?define("uikitlightbox",i):t.UIkitLightbox=i()}(this,function(){"use strict";function t(t,i){return void 0===t&&(t=0),void 0===i&&(i="%"),"translate("+t+(t?i:"")+", 0)"}function i(t){return"scale3d("+t+", "+t+", 1)"}function e(t){function i(t,i,e,s,o,a){var r=t.percent,h=t.translate,l=(0,t.show)(o);return{animation:t,dir:o,current:e,next:s,show:function(t,r,h){var u=this;void 0===r&&(r=0);var c=h?"linear":i;return t-=Math.round(t*r),this.translate(r),n(s,"itemin",{percent:r,duration:t,ease:c,dir:o}),e&&n(e,"itemout",{percent:1-r,duration:t,ease:c,dir:o}),T.all([E.start(s,l[1],t,c),e&&E.start(e,l[0],t,c)]).then(function(){u.reset(),a()},y)},stop:function(){return E.stop([s,e])},cancel:function(){E.cancel([s,e])},reset:function(){for(var t in l[0])d([s,e],t,"")},forward:function(t){var i=this.percent();E.cancel([s,e]),this.show(t,i,!0)},translate:function(t){var i=h(t,o);d(s,i[1]),e&&d(e,i[0]),n(s,"itemtranslatein",{percent:t,dir:o}),e&&n(e,"itemtranslateout",{percent:1-t,dir:o})},percent:function(){return r(e,s,o)}}}function n(t,i,e){H(t,c(i,!1,!1,e))}function o(t){return~~t}if(!e.installed){var a=t.util,r=a.$$,h=a.$,l=a.addClass,u=a.assign,c=a.createEvent,d=a.css,f=a.data,m=a.doc,p=a.endsWith,g=a.fastdom,v=a.getIndex,k=a.getPos,w=a.hasClass,x=a.index,b=a.isTouch,y=a.noop,I=a.off,A=a.on,$=a.pointerDown,_=a.pointerMove,C=a.pointerUp,L=a.preventClick,T=a.Promise,P=a.removeClass,M=a.toggleClass,D=a.toNodes,E=a.Transition,H=a.trigger,j=a.win,N=Math.abs;t.mixin.slideshow={attrs:!0,props:{autoplay:Boolean,autoplayInterval:Number,pauseOnHover:Boolean,animation:String,easing:String,velocity:Number},defaults:{autoplay:!1,autoplayInterval:7e3,pauseOnHover:!0,animation:"slide",easing:"ease",velocity:1,index:0,stack:[],threshold:10,percent:0,clsActive:"uk-active",clsActivated:"uk-transition-active",initialAnimation:!1,Animations:s(t)},computed:{list:function(t,i){var e=t.selList;return h(e,i)},slides:function(){return D(this.list.children)},animation:function(t){var i=t.animation,e=t.Animations;return u(i in e?e[i]:e.slide,{name:i})},duration:function(t,i){var e=t.velocity;return function(t){return.5*t+300}(i.offsetWidth/e)}},init:function(){var t=this;["start","move","end"].forEach(function(i){var e=t[i];t[i]=function(i){var n=k(i).x;t.prevPos=n!==t.pos?t.pos:t.prevPos,t.pos=n,e(i)}})},connected:function(){this.startAutoplay()},disconnected:function(){this.stopAutoplay()},update:[{read:function(){delete this._computeds.duration},events:["load","resize"]}],events:[{name:"click",delegate:function(){return"["+this.attrItem+"],[data-"+this.attrItem+"]"},handler:function(t){t.preventDefault(),t.current.blur(),this.show(f(t.current,this.attrItem))}},{name:$,delegate:function(){return this.selList+" > *"},handler:function(t){!b(t)&&function(t){return!t.children.length&&t.childNodes.length}(t.target)||this.start(t)}},{name:"visibilitychange",el:m,handler:function(){m.hidden?this.stopAutoplay():this.startAutoplay()}},{name:$,handler:"stopAutoplay"},{name:"mouseenter",filter:function(){return this.autoplay},handler:function(){this.isHovering=!0}},{name:"mouseleave",filter:function(){return this.autoplay},handler:function(){this.isHovering=!1}},{name:"beforeitemshow",self:!0,delegate:function(){return this.selList+" > *"},handler:function(t){var i=t.target;l(i,this.clsActive)}},{name:"itemshown",self:!0,delegate:function(){return this.selList+" > *"},handler:function(t){var i=t.target;l(i,this.clsActivated)}},{name:"itemshow itemhide",self:!0,delegate:function(){return this.selList+" > *"},handler:function(t){var i=t.type,e=t.target;M(r("["+this.attrItem+'="'+x(e)+'"],[data-'+this.attrItem+'="'+x(e)+'"]',this.$el),this.clsActive,p(i,"show"))}},{name:"itemhidden",self:!0,delegate:function(){return this.selList+" > *"},handler:function(t){var i=t.target;P(i,this.clsActive),P(i,this.clsActivated)}},{name:"itemshow itemhide itemshown itemhidden",self:!0,delegate:function(){return this.selList+" > *"},handler:function(i){var e=i.target;t.update(null,e)}},{name:"dragstart",handler:function(t){t.preventDefault()}}],methods:{start:function(t){if(!(t.button>0||this.slides.length<2||this._animation&&this._animation.animation!==this.animation)){var i=0;if(this.stack.length){var e=this._animation,n=e.dir,s=e.percent,o=e.cancel,a=e.translate;i=s()*n,this.percent=N(i)*-n,this.stack.splice(0,this.stack.length),o(),a(N(i)),this.index=this.getIndex(this.index-n),this.dragging=!0}this.unbindMove=A(m,_,this.move,{capture:!0,passive:!1}),A(j,"scroll",this.unbindMove),A(m,C,this.end,!0),this.drag=this.pos+this.$el.offsetWidth*i}},move:function(e){var n=this,s=this.pos-this.drag;if(!(this.prevPos===this.pos||!this.dragging&&N(s)<this.threshold)){e.cancelable&&e.preventDefault(),this.dragging=!0;var a=s/this.$el.offsetWidth;if(this.percent!==a){var r=this.getIndex(this.index-o(this.percent)),h=this.getIndex(this.index-o(a)),l=this.slides[h],u=a<0?1:-1,c=v(a<0?"next":"previous",this.slides,h),d=this.slides[c];this.slides.forEach(function(t,i){return M(t,n.clsActive,i===h||i===c)}),this._animation&&this._animation.reset(),h!==r&&(H(this.slides[r],"itemhide",[this]),H(l,"itemshow",[this])),this._animation=new i(this.animation,this.easing,l,d,u,y),this._animation.translate(N(a%1)),this.percent=a,t.update(null,l),t.update(null,d)}}},end:function(){if(I(j,"scroll",this.unbindMove),this.unbindMove(),I(m,C,this.end,!0),this.dragging){var t=this.percent;this.percent=N(this.percent)%1,this.index=this.getIndex(this.index-o(t)),(this.percent<.1||t<0==this.pos>this.prevPos)&&(this.index=this.getIndex(t>0?"previous":"next"),this.percent=1-this.percent,t*=-1),this._animation&&this._animation.reset(),this.show(t>0?"previous":"next",!0),L()}this.drag=this.dragging=this.percent=null},show:function(t,i){var e=this;if(void 0===i&&(i=!1),i||!this.drag)if(this.stack[i?"unshift":"push"](t),!i&&this.stack.length>1)2===this.stack.length&&this._animation.forward(250);else{var n=this.index,s=this.getIndex(t),o=w(this.slides,"uk-active")&&this.slides[n],a=this.slides[s];if(o!==a){o&&H(o,"beforeitemhide",[this]),H(a,"beforeitemshow",[this]),this.index=s;var r=function(){o&&H(o,"itemhidden",[e]),H(a,"itemshown",[e]),g.write(function(){e.stack.shift(),e.stack.length?e.show(e.stack.shift(),!0):e._animation=null})};(o||this.initialAnimation)&&this._show(o?this.animation:this.Animations[this.initialAnimation],i?"cubic-bezier(0.165, 0.840, 0.440, 1.000)":this.easing,o,a,function(t,i){return"next"===t?1:"previous"===t?-1:t<i?-1:1}(t,n),this.stack.length>1,r),o&&H(o,"itemhide",[this]),H(a,"itemshow",[this]),o||this.initialAnimation||r(),o&&g.flush()}else this.stack[i?"shift":"pop"]()}},_show:function(t,e,n,s,o,a,r){this._animation=new i(t,e,n,s,o,r),this._animation.show(n===s?300:a?150:this.duration,this.percent,a)},getIndex:function(t){return void 0===t&&(t=this.index),v(t,this.slides,this.index)},startAutoplay:function(){var t=this;this.stopAutoplay(),this.autoplay&&(this.interval=setInterval(function(){t.isHovering&&t.pauseOnHover||t.stack.length||t.show("next")},this.autoplayInterval))},stopAutoplay:function(){this.interval&&clearInterval(this.interval)}}}}}function n(t){function i(t,i,e,n){return'<iframe src="'+t+'" width="'+i+'" height="'+e+'" style="max-width: 100%; box-sizing: border-box;" frameborder="0" allowfullscreen uk-video="autoplay: '+n+'" uk-responsive></iframe>'}if(!n.installed){t.use(e);var s=t.mixin,a=t.util,r=a.$,h=a.$$,l=a.addClass,u=a.ajax,c=a.append,d=a.assign,f=a.attr,m=a.css,p=a.doc,g=a.docEl,v=a.data,k=a.getImage,w=a.html,x=a.index,b=a.on,y=a.pointerDown,I=a.pointerMove,A=a.removeClass,$=a.Transition,_=a.trigger;t.component("lightbox",{attrs:!0,props:{animation:String,toggle:String,autoplay:Boolean,autoplayInterval:Number,videoAutoplay:Boolean},defaults:{animation:void 0,toggle:"a",autoplay:0,videoAutoplay:!1},computed:{toggles:function(t,i){var e=t.toggle;return h(e,i)}},disconnected:function(){this._destroy()},events:[{name:"click",delegate:function(){return this.toggle+":not(.uk-disabled)"},handler:function(t){t.preventDefault(),t.current.blur(),this.show(x(this.toggles,t.current))}}],update:function(t){this.panel&&this.animation&&(this.panel.$props.animation=this.animation,this.panel.$emit()),!this.panel||t.toggles&&function(t,i){return t.length===i.length&&t.every(function(t,e){return t!==i[e]})}(t.toggles,this.toggles)||(t.toggles=this.toggles,this._destroy(),this._init())},methods:{_init:function(){return this.panel=this.panel||t.lightboxPanel(d({},this.$props,{items:this.toggles.reduce(function(t,i){return t.push(["href","caption","type","poster"].reduce(function(t,e){return t["href"===e?"source":e]=v(i,e),t},{})),t},[])}))},_destroy:function(){this.panel&&(this.panel.$destroy(!0),this.panel=null)},show:function(t){return this.panel||this._init(),this.panel.show(t)},hide:function(){return this.panel&&this.panel.hide()}}}),t.component("lightbox-panel",{mixins:[s.container,s.togglable,s.slideshow],functional:!0,defaults:{preload:1,videoAutoplay:!1,delayControls:3e3,items:[],cls:"uk-open",clsPage:"uk-lightbox-page",selList:".uk-lightbox-items",attrItem:"uk-lightbox-item",initialAnimation:"scale",pauseOnHover:!1,velocity:2,Animations:o(t),template:'<div class="uk-lightbox uk-overflow-hidden"> <ul class="uk-lightbox-items"></ul> <div class="uk-lightbox-toolbar uk-position-top uk-text-right uk-transition-slide-top uk-transition-opaque"> <button class="uk-lightbox-toolbar-icon uk-close-large" type="button" uk-close uk-toggle="!.uk-lightbox"></button> </div> <a class="uk-lightbox-button uk-position-center-left uk-position-medium uk-transition-fade" href="#" uk-slidenav-previous uk-lightbox-item="previous"></a> <a class="uk-lightbox-button uk-position-center-right uk-position-medium uk-transition-fade" href="#" uk-slidenav-next uk-lightbox-item="next"></a> <div class="uk-lightbox-toolbar uk-lightbox-caption uk-position-bottom uk-text-center uk-transition-slide-bottom uk-transition-opaque"></div> </div>'},created:function(){var t=this;this.$mount(c(this.container,this.template)),this.caption=r(".uk-lightbox-caption",this.$el),this.items.forEach(function(i,e){return c(t.list,"<li></li>")})},events:[{name:I+" "+y+" keydown",handler:"showControls"},{name:"click",self:!0,delegate:function(){return this.selList+" > *"},handler:function(t){t.preventDefault(),this.hide()}},{name:"show",self:!0,handler:function(){l(g,this.clsPage)}},{name:"shown",self:!0,handler:"showControls"},{name:"hide",self:!0,handler:"hideControls"},{name:"hidden",self:!0,handler:function(){A(g,this.clsPage)}},{name:"keyup",el:function(){return p},handler:function(t){if(this.isToggled(this.$el))switch(t.keyCode){case 27:this.hide();break;case 37:this.show("previous");break;case 39:this.show("next")}}},{name:"toggle",handler:function(t){t.preventDefault(),this.toggle()}},{name:"beforeitemshow",self:!0,delegate:function(){return this.selList+" > *"},handler:function(){this.isToggled()||this.toggleNow(this.$el,!0)}},{name:"itemshow",self:!0,delegate:function(){return this.selList+" > *"},handler:function(t){var i=t.target,e=x(i),n=this.getItem(e).caption;m(this.caption,"display",n?"":"none"),w(this.caption,n);for(var s=0;s<=this.preload;s++)this.loadItem(this.getIndex(e+s)),this.loadItem(this.getIndex(e-s))}},{name:"itemload",handler:function(t,e){var n,s=this,o=e.source,a=e.type;if(this.setItem(e,"<span uk-spinner></span>"),o)if("image"===a||o.match(/\.(jp(e)?g|png|gif|svg)$/i))k(o).then(function(t){return s.setItem(e,'<img width="'+t.width+'" height="'+t.height+'" src="'+o+'">')},function(){return s.setError(e)});else if("video"===a||o.match(/\.(mp4|webm|ogv)$/i)){var h=r("<video controls playsinline"+(e.poster?' poster="'+e.poster+'"':"")+' uk-video="autoplay: '+this.videoAutoplay+'"></video>');f(h,"src",o),b(h,"error",function(){return s.setError(e)}),b(h,"loadedmetadata",function(){f(h,{width:h.videoWidth,height:h.videoHeight}),s.setItem(e,h)})}else if("iframe"===a)this.setItem(e,'<iframe class="uk-lightbox-iframe" src="'+o+'" frameborder="0" allowfullscreen></iframe>');else if(n=o.match(/\/\/.*?youtube\.[a-z]+\/watch\?v=([^&\s]+)/)||o.match(/youtu\.be\/(.*)/)){var l=n[1],c=function(t,n){return void 0===t&&(t=640),void 0===n&&(n=450),s.setItem(e,i("//www.youtube.com/embed/"+l,t,n,s.videoAutoplay))};k("//img.youtube.com/vi/"+l+"/maxresdefault.jpg").then(function(t){var i=t.width,e=t.height;120===i&&90===e?k("//img.youtube.com/vi/"+l+"/0.jpg").then(function(t){var i=t.width,e=t.height;return c(i,e)},c):c(i,e)},c)}else(n=o.match(/(\/\/.*?)vimeo\.[a-z]+\/([0-9]+).*?/))&&u("//vimeo.com/api/oembed.json?maxwidth=1920&url="+encodeURI(o),{responseType:"json"}).then(function(t){var o=t.response,a=o.height,r=o.width;return s.setItem(e,i("//player.vimeo.com/video/"+n[2],r,a,s.videoAutoplay))})}}],methods:{toggle:function(){return this.isToggled()?this.hide():this.show()},hide:function(){this.isToggled()&&this.toggleNow(this.$el,!1),A(this.slides,this.clsActive),$.stop(this.slides),delete this.index,delete this.percent,delete this._animation},loadItem:function(t){void 0===t&&(t=this.index);var i=this.getItem(t);i.content||_(this.$el,"itemload",[i])},getItem:function(t){return void 0===t&&(t=this.index),this.items[t]||{}},setItem:function(i,e){d(i,{content:e});var n=w(this.slides[this.items.indexOf(i)],e);_(this.$el,"itemloaded",[this,n]),t.update(null,n)},setError:function(t){this.setItem(t,'<span uk-icon="icon: bolt; ratio: 2"></span>')},showControls:function(){clearTimeout(this.controlsTimer),this.controlsTimer=setTimeout(this.hideControls,this.delayControls),f(h("["+this.attrItem+"],[data-"+this.attrItem+"]",this.$el),"hidden",this.items.length<2?"":null),l(this.$el,"uk-active","uk-transition-active")},hideControls:function(){A(this.$el,"uk-active","uk-transition-active")}}})}}var s=function(i){var e=i.util.css,n={slide:{show:function(i){return[{transform:t(-100*i)},{transform:t()}]},percent:function(t){return n.translated(t)},translate:function(i,e){return[{transform:t(-100*e*i)},{transform:t(100*e*(1-i))}]}},translated:function(t){return Math.abs(e(t,"transform").split(",")[4]/t.offsetWidth)||0}};return n},o=function(t){var e=t.mixin,n=t.util,s=n.assign,o=n.css;return s({},e.slideshow.defaults.Animations,{fade:{show:function(){return[{opacity:0},{opacity:1}]},percent:function(t){return 1-o(t,"opacity")},translate:function(t){return[{opacity:1-t},{opacity:t}]}},scale:{show:function(){return[{opacity:0,transform:i(.8)},{opacity:1,transform:i(1)}]},percent:function(t){return 1-o(t,"opacity")},translate:function(t){return[{opacity:1-t,transform:i(1-.2*t)},{opacity:t,transform:i(.8+.2*t)}]}}})};return"undefined"!=typeof window&&window.UIkit&&window.UIkit.use(n),n});