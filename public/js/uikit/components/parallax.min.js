/*! UIkit 3.0.0-beta.35 | http://www.getuikit.com | (c) 2014 - 2017 YOOtheme | MIT License */

!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define("uikitparallax",t):e.UIkitParallax=t()}(this,function(){"use strict";function e(t){function r(e,t){var r=e.length-1,i=Math.min(Math.floor(r*t),r-1),a=e.slice(i,i+2);return a.push(1===t?1:t%(1/r)*r),a}function i(e,t){var i=r(e,t),a=i[0],n=i[1],o=i[2];return(f(a)?a+Math.abs(a-n)*o*(a<n?1:-1):+n).toFixed(2)}if(!e.installed){var a=t.mixin,n=t.util,o=n.clamp,s=n.css,c=n.Dimensions,u=n.each,l=n.getImage,p=n.includes,f=n.isNumber,d=n.isUndefined,h=n.scrolledOver,g=n.toFloat,m=n.query,b=n.win,v=["x","y","bgx","bgy","rotate","scale","color","backgroundColor","borderColor","opacity","blur","hue","grayscale","invert","saturate","sepia","fopacity"];a.parallax={props:v.reduce(function(e,t){return e[t]="list",e},{media:"media"}),defaults:v.reduce(function(e,t){return e[t]=void 0,e},{media:!1}),computed:{props:function(e,t){var r=this;return v.reduce(function(i,a){if(d(e[a]))return i;var n,o,c,u=a.match(/color/i),l=u||"opacity"===a,f=e[a].slice(0);l&&s(t,a,""),f.length<2&&f.unshift(("scale"===a?1:l?s(t,a):0)||0);var h=p(f.join(""),"%")?"%":"px";if(u){var m=t.style.color;f=f.map(function(e){return function(e,t){return s(s(e,"color",t),"color").split(/[(),]/g).slice(1,-1).concat(1).slice(0,4).map(function(e){return g(e)})}(t,e)}),t.style.color=m}else f=f.map(g);if(a.match(/^bg/))if(s(t,"background-position-"+a[2],""),o=s(t,"backgroundPosition").split(" ")["x"===a[2]?0:1],r.covers){var b=Math.min.apply(Math,f),v=Math.max.apply(Math,f),k=f.indexOf(b)<f.indexOf(v);c=v-b,f=f.map(function(e){return e-(k?b:v)}),n=(k?-c:0)+"px"}else n=o;return i[a]={steps:f,unit:h,pos:n,bgPos:o,diff:c},i},{})},bgProps:function(){var e=this;return["bgx","bgy"].filter(function(t){return t in e.props})},covers:function(e,t){return"cover"===s(""!==t.style.backgroundSize?s(t,"backgroundSize",""):t,"backgroundSize")}},disconnected:function(){delete this._image},update:[{read:function(e){var t=this;if(this._resetComputeds(),e.active=!this.media||b.matchMedia(this.media).matches,e.image&&(e.image.dimEl={width:this.$el.offsetWidth,height:this.$el.offsetHeight}),!("image"in e)&&this.covers&&this.bgProps.length){var r=s(this.$el,"backgroundImage").replace(/^none|url\(["']?(.+?)["']?\)$/,"$1");r&&(e.image=!1,l(r).then(function(r){e.image={width:r.naturalWidth,height:r.naturalHeight},t.$emit()}))}},write:function(e){var t=this,r=e.image,i=e.active;if(r)if(i){var a=r.dimEl,n=c.cover(r,a);this.bgProps.forEach(function(e){var i=t.props[e],o=i.diff,s=i.bgPos,u=i.steps,l="bgy"===e?"height":"width",p=n[l]-a[l];s.match(/%$|0px/)&&(p<o?a[l]=n[l]+o-p:p>o&&(s=parseFloat(s))&&(t.props[e].steps=u.map(function(e){return e-(p-o)/(100/s)})),n=c.cover(r,a))}),s(this.$el,{backgroundSize:n.width+"px "+n.height+"px",backgroundRepeat:"no-repeat"})}else s(this.$el,{backgroundSize:"",backgroundRepeat:""})},events:["load","resize"]}],methods:{reset:function(){var e=this;u(this.getCss(0),function(t,r){return s(e.$el,r,"")})},getCss:function(e){var t=!1,a=this.props;return Object.keys(a).reduce(function(n,o){var s=a[o],c=s.steps,u=s.unit,l=s.pos,p=i(c,e);switch(o){case"x":case"y":if(t)break;var f=["x","y"].map(function(t){return o===t?p+u:a[t]?i(a[t].steps,e)+a[t].unit:0}),d=f[0],h=f[1];t=n.transform+=" translate3d("+d+", "+h+", 0)";break;case"rotate":n.transform+=" rotate("+p+"deg)";break;case"scale":n.transform+=" scale("+p+")";break;case"bgy":case"bgx":n["background-position-"+o[2]]="calc("+l+" + "+(p+u)+")";break;case"color":case"backgroundColor":case"borderColor":var m=r(c,e),b=m[0],v=m[1],k=m[2];n[o]="rgba("+b.map(function(e,t){return e+=k*(v[t]-e),3===t?g(e):parseInt(e,10)}).join(",")+")";break;case"blur":n.filter+=" blur("+p+"px)";break;case"hue":n.filter+=" hue-rotate("+p+"deg)";break;case"fopacity":n.filter+=" opacity("+p+"%)";break;case"grayscale":case"invert":case"saturate":case"sepia":n.filter+=" "+o+"("+p+"%)";break;default:n[o]=p}return n},{transform:"",filter:""})}}},t.component("parallax",{mixins:[a.parallax],props:{target:String,viewport:Number,easing:Number},defaults:{target:!1,viewport:1,easing:1},computed:{target:function(e,t){var r=e.target;return r&&m(r,t)||t}},update:[{read:function(e){return{prev:e.percent,percent:function(e,t){return o(e*(1-(t-t*e)))}(h(this.target)/(this.viewport||1),this.easing)}},write:function(e,t){var r=e.prev,i=e.percent,a=e.active;"scroll"!==t.type&&(r=!1),a?r!==i&&s(this.$el,this.getCss(i)):this.reset()},events:["scroll","load","resize"]}]})}}return"undefined"!=typeof window&&window.UIkit&&window.UIkit.use(e),e});